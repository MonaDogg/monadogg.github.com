
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>(一)链表笔记 - MonaDogg</title>
	<meta name="author" content="MonaDogg">

	
	<meta name="description" content="最近发现自己数据结构和算法十分薄弱,于是准备复习这方面的知识,选用的教材是&lt;算法精解-c语言描述>,在此,把复习中的笔记记录如下. 其中涉及的知识点: 1.格式化输出函数fprintf()中的stdout、stderr printf将格式化写到标准输出，fprintf写至指定的流。 &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="MonaDogg" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="/javascripts/jquery-1.7.2.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">MonaDogg</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/blog/categories/ios">iOS</a></li>
	<li><a href="/blog/categories/os">OS</a></li>
	<li><a href="/blog/categories/myLife">myLife</a></li>
	<li><a href="/about_me">aboutMe</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/blog/categories/ios">iOS</a></li>
	<li><a href="/blog/categories/os">OS</a></li>
	<li><a href="/blog/categories/myLife">myLife</a></li>
	<li><a href="/about_me">aboutMe</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:MonaDogg.github.io">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
    
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:MonaDogg.github.io">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner"><article class="post">
	<h2 class="title">(一)链表笔记</h2>
	<div class="entry-content"><p>最近发现自己数据结构和算法十分薄弱,于是准备复习这方面的知识,选用的教材是&lt;算法精解-c语言描述>,在此,把复习中的笔记记录如下.</p>

<p>其中涉及的知识点:</p>

<h2>1.格式化输出函数fprintf()中的stdout、stderr</h2>

<p>printf将格式化写到标准输出，fprintf写至指定的流。</p>

<p>stdin:标准输入
stdout:标准输出
stderr:标准错误</p>

<p>int fprintf(
   FILE <em>stream,                    //为 FILE 结构的指针
   const char </em>format [,
   argument ]&hellip;
);</p>

<h2>2.宏定义的写法</h2>

<p>宏定义默认都大写,不需要类型,没有{}只有()</p>

<pre>
//得到链表中的尾元素
#define list_tail(list) ((list)->tail)

//判断该元素是不是头元素
#define list_is_head(list, element) ((element) == ((list)->head) ? 1 : 0)
</pre>


<h2>3.c语言常用库</h2>

<pre><code>#include &lt;stdlib.h&gt;
//stdlib 头文件即standard library标准库头文件
//本例中用了内存申请和释放:malloc()和free()

#include &lt;string.h&gt;
//C语言里面关于字符数组的函数定义的头文件
//本例中用了memset()重置内存区域
</code></pre>

<h2>4.memset的用法</h2>

<pre><code>//设置缓冲区到制定的位置
void *memset(
   void *dest,      //开始的内存地址
   int c,               //设置值
   size_t count     //设置的长度
);
memset(tempList, 0, sizeof(NewList));
</code></pre>

<p>设置tempList开始的内存地址,长度为NewList类型的长度,值为0</p>

<h2>5.如何申请内存和释放内存</h2>

<p>1)申请内存</p>

<pre><code>if ((new_element = (ListElmt *)malloc(sizeof(ListElmt))) == NULL)
      return -1;
</code></pre>

<p>2)释放内存</p>

<pre><code>free(willDeleteListElement);
</code></pre>

<h2>6.以下为链表的实现文件</h2>

<p>linkList.h</p>

<pre><code>//
//  linkList.h
//  clist
//
//  Created by lee on 14-2-23.
//  Copyright (c) 2014年 lee. All rights reserved.
//

#ifndef clist_linkList_h
#define clist_linkList_h

//定义链表元素结构
typedef struct LinkListElement_
{
    void *data;
    struct LinkListElement_ *nextElement;
}LinkListElement;

//定义链表结构
typedef struct LinkList_
{
    LinkListElement *headListElement;
    LinkListElement *tailListElement;
    int size;
    //如果data是自定义类型,那么需要初始化的时候设置destroy来释放内存
    void (*destroy)(void *data);
}LinkList;


//初始化链表
void linkListInit(LinkList *linkList,void (* destroy)(void *data));

//删除,返回0为正常,其他为异常
int linkListDelete(LinkList *linkList,LinkListElement *frontListElement,void **data);

//插入
int linkListInsert(LinkList *linkList,LinkListElement *frontListElement,void *data);
//int linkListInsert(LinkList *linkList,LinkListElement *frontListElement,const void *data);

//销毁
void linkListDestroy(LinkList *linkList);

#define LINKLIST_SIZE(linkList) (linkList-&gt;size)
#define LINKLIST_HEAD_ELEMENT(linkList) (linkList-&gt;headListElement)
#define LINKLIST_TAIL_ELEMENT(linkList) (linkList-&gt;tailListElement)
#define LINKLIST_DATA(linklistElement) (linklistElement-&gt;data)
#define LINKLIST_NEXT(linklistElement) (linklistElement-&gt;nextElement)
#define LINKLIST_IS_HEAD_ELEMENT(linkList,linklistElement)(linklistElement == LINKLIST_HEAD_ELEMENT(linkList) ? 1 : 0 )
#define LINKLIST_IS_TAIL_ELEMENT(linkList,linklistElement)(linklistElement == LINKLIST_TAIL_ELEMENT(linkList) ? 1 : 0 )

#endif
</code></pre>

<p>linkList.m</p>

<pre><code>//
//  linkList.c
//  clist
//
//  Created by lee on 14-2-25.
//  Copyright (c) 2014年 lee. All rights reserved.
//

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include "linkList.h"


void linkListInit(LinkList *linkList,void (* destroy)(void *data))
{
    linkList-&gt;headListElement = NULL;
    linkList-&gt;tailListElement = NULL;
    linkList-&gt;size = 0;
    linkList-&gt;destroy = destroy;
    return;
}


//考虑是否从头删除,并且考虑链表新的头尾元素
//非从头删除,需要考虑新的尾元素

int linkListDelete(LinkList *linkList,LinkListElement *frontListElement,void **data)
{


    if (LINKLIST_SIZE(linkList) == 0 || frontListElement == LINKLIST_TAIL_ELEMENT(linkList)) {
        return -1;
    }

    LinkListElement *deleteElement;

#pragma -mark 没有考虑frontListElement = NULL的情况
//    LinkListElement *deleteElement = frontListElement-&gt;nextElement;
//    *data = deleteElement-&gt;data;

    if (frontListElement == NULL) {

        deleteElement = LINKLIST_HEAD_ELEMENT(linkList);
        *data = deleteElement-&gt;data;

        //包含为NULL的情况
        linkList-&gt;headListElement = deleteElement-&gt;nextElement;
        if (LINKLIST_HEAD_ELEMENT(linkList) -&gt;nextElement == NULL) {
            linkList-&gt;tailListElement = LINKLIST_HEAD_ELEMENT(linkList);
        }

    }else{

        deleteElement = frontListElement-&gt;nextElement;
        *data = deleteElement-&gt;data;

        frontListElement-&gt;nextElement = deleteElement-&gt;nextElement;
        if (frontListElement-&gt;nextElement == NULL) {
            linkList-&gt;tailListElement = frontListElement;
        }
    }

    free(deleteElement);
    linkList-&gt;size --;
    return 0;
}





//从头插入,判断当前列表是否有元素,进而判断链表的头尾元素
//非从头插入,需要考虑是否插入元素是否为尾元素

int linkListInsert(LinkList *linkList,LinkListElement *frontListElement,void *data)
{
    LinkListElement *insertElement;
    if((insertElement = (LinkListElement *)malloc(sizeof(LinkListElement))) == NULL)
        return -1;
    insertElement-&gt;data = data;

    if (frontListElement == NULL) {
        //如果没有元素,或者没有元素
        if (LINKLIST_SIZE(linkList) == 0) {
            linkList-&gt;tailListElement = insertElement;
        }else{
            insertElement-&gt;nextElement = linkList-&gt;headListElement;
        }
        linkList-&gt;headListElement = insertElement;


    }else{
#pragma -mark 当插入元素是尾元素的情况
        if (frontListElement-&gt;nextElement == NULL) {
            linkList-&gt;tailListElement = insertElement;
        }

        insertElement-&gt;nextElement =  frontListElement-&gt;nextElement;
        frontListElement-&gt;nextElement = insertElement;
    }

    linkList-&gt;size ++;

    return 0;
}






//需要遍历释放list中的各个元素的data,并且需要判断destroy是否存在

void linkListDestroy(LinkList *linkList)
{
    void *data = NULL;

    while (LINKLIST_SIZE(linkList) &gt; 0) {

#pragma -mark 不要忘记destroy为NULL的情况
        if(linkListDelete(linkList, NULL, (void **)data) == 0 &amp;&amp; linkList-&gt;destroy != NULL ){
            linkList-&gt;destroy(data);
        }
    }

    memset(linkList,0,sizeof(LinkList));
}
</code></pre>
</div>


<div class="meta">
	<div class="date">








  


<time datetime="2014-02-23T22:26:00+08:00" pubdate data-updated="true">Feb 23<span>rd</span>, 2014</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/ios/'>iOS</a>


</div>
	
</div>
</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
		
		
		
		
	</div>
	
</div>



     <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
	<a class="jiathis_button_qzone"></a>
	<a class="jiathis_button_tsina"></a>
	<a class="jiathis_button_tqq"></a>
	<a class="jiathis_button_weixin"></a>
	<a class="jiathis_button_renren"></a>
	<a class="jiathis_button_xiaoyou"></a>
	<a href="http://www.jiathis.com/share?uid=1865940" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
</div>
<script type="text/javascript">
var jiathis_config = {data_track_clickback:'true'};
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code_mini/jia.js?uid=1354413288083326" charset="utf-8"></script>
<!-- JiaThis Button END -->

<!-- UY BEGIN -->
<div id="uyan_frame"></div>
<script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=1865940"></script>
<!-- UY END -->


</div>
	<footer id="footer" class="inner">Copyright &copy; 2014

    MonaDogg

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->






</body>
</html>